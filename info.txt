ssh -l root -p 999 178.215.91.10
sftp -P 999 root@178.215.91.10

.kV%BRXgbG]93]]

cmake --build . --target install
sed 's/:.*//' /etc/passwd
find . -name "*.so" -print


123qweasd


SSH Доступ к "серверу обновлений":
178.215.91.10:999
root
.kV%BRXgbG]93]]

логин/пасс от бд:
root
123qweasd

Сама бд: gameap

сервер с игровыми серверами + фтп (подключение по ssh только через "сервер обновлений"):
ssh root@192.168.1.201 
123qweasd




Добрый день! Приношу извинения за задержку.

1. У нас есть панель управления для работы с различными приложениями. В панели управления регистрируются пользователи и оформляют "аренду" различных приложений.

После оформления на определённом сервере, который указывается при оформлении, создаётся юзер дир и юзер фолдер, после чего в юзер дир/юзер фолдер распаковывается приложение.

Всё это делается по крону, крон обновляется раз в минуту. Всего требуется три действия на все операции - три минуты.


2. Все проделанные действия логируются и данные хранятся в базе данных. В частности информация - юзер дир и юзер фолдер, которые принадлежат определённому пользователю и определённому серверу, на котором всё это располагается.


3. Серверная часть написана на баше. Скрипты создают юзер дир и юзер фолдер, а так же выполняют ряд других действий.

Панель управления располагается на своём сервере. База данных на своём. Сервер,куда нужно будет складывать патчи - на своём.

Серверов, на которые нам нужно предоставлять патчи - может быть много.


Последовательность примерно такая:

Оформление заказа -> часть данных заносится в базу (о выполненном заказе) -> обработка баш скриптами -> заносятся данные в базу.


Пример из таблицы gameap_servers:

LOCK TABLES `gameap_servers` WRITE;
/*!40000 ALTER TABLE `gameap_servers` DISABLE KEYS */;
INSERT INTO `gameap_servers` VALUES (1,'cstrike_bBXIoE_27035','cstrike',1,'test Counter Strike 1.6',1518201720,2,1,1,'192.168.1.201',27035,'192.168.1.201',27035,27035,27035,'BSoCKwUEVF0ObABbURFXSA==','cstrike/maps','','test/cstrike_d60dbj_27035','',0,0,0,'','','./hlds_run -game {game} +ip {ip} +port {port} +maxplayers {maxplayers} +map {default_map} -insecure','{\"default_map\":\"de_dust2\",\"hl_exec\":\"\",\"maxplayers\":\"\",\"fps\":\"\"}','');
/*!40000 ALTER TABLE `gameap_servers` ENABLE KEYS */;
UNLOCK TABLES;

cstrike_bBXIoE_27035 - случайная юзер фолдер, куда нам нужно положить патч

test/cstrike_d60dbj_27035 - юзер дир/юзер фолдер


Так же мы можем узнать к какому серверу это всё относится:

LOCK TABLES `gameap_services` WRITE;
/*!40000 ALTER TABLE `gameap_services` DISABLE KEYS */;
INSERT INTO `gameap_services` VALUES (2,'active','test Counter Strike 1.6','',0,1,2,1,'cstrike',1,1,2,1,1,'1 month',604800,1515523320,1518201720,'{\"1\":\"1000\",\"ip\":\"192.168.1.201\",\"ip_w\":\"192.168.1.201\",\"pay_period\":\"\"}');
/*!40000 ALTER TABLE `gameap_services` ENABLE KEYS */;
UNLOCK TABLES;


В атачае бд.


Мы готовы предоставить весь исходный код и продублировать то, что у нас используется в продакшене 1 к 1 с полным доступом или же подсказать как развенуть всё это локально прямо у Вас.

    Четверг, 11 января 2018, 19:39 +03:00 от ter-08@inbox.ru <ter-08@inbox.ru>:
	
	
	


MariaDB - это форк MySQL.

https://mariadb.com/kb/en/library/mariadb-connector-c/
https://mariadb.com/kb/en/library/mariadb-connectorc-api-functions/